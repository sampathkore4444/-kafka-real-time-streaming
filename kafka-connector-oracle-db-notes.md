The root cause of your issue is that **Debezium Oracle connector requires a common user (with C## prefix)** for multitenant databases like Oracle 21c XE.

Your screenshot shows two users:
- C##DEBEZIUM (COMMON = YES) â€” this is a **common user** (exists in CDB and all PDBs).
- DEBEZIUM (COMMON = NO) â€” this is a **local user** (only in XEPDB1).

Debezium connects to the CDB (XE) and then switches to the PDB (XEPDB1). It needs access to system views in the CDB for LogMiner, so it **requires a common user** to operate correctly across containers.

Local users (without C##) cannot access CDB-level LogMiner resources properly from JDBC, causing the ORA-01017 during version resolution/authentication.

That's why it worked with C##DEBEZIUM but not with DEBEZIUM.

### Final Correct 10 Steps (Using Common User C##DEBEZIUM)

#### Step 1: Connect as SYS to the CDB (XE)
```powershell
sqlplus sys@//localhost:1521/XE as sysdba
```
Enter SYS password.

Verify:
SQLSHOW CON_NAME;
â†’ Should show CDB$ROOT or XE
or
SELECT SYS_CONTEXT('USERENV','CON_NAME') FROM dual;

#### Step 2: Drop any conflicting local DEBEZIUM user (if exists)
```sql
ALTER SESSION SET CONTAINER = XEPDB1;
DROP USER DEBEZIUM CASCADE;  -- Safe if no important data
ALTER SESSION SET CONTAINER = XE;
```

#### Step 3: Create the common Debezium user (C## prefix) (This has to be executed in CDB$ROOT)

ALTER SESSION SET CONTAINER = CDB$ROOT;

```sql
CREATE USER C##DEBEZIUM IDENTIFIED BY dbz CONTAINER=ALL;

GRANT CONNECT, RESOURCE TO C##DEBEZIUM CONTAINER=ALL;
GRANT UNLIMITED TABLESPACE TO C##DEBEZIUM CONTAINER=ALL;
```

#### Step 4: Create the BANK schema/user (application schema) (local in XEPDB1)
```sql
ALTER SESSION SET CONTAINER = XEPDB1;

CREATE USER BANK IDENTIFIED BY bank_password;

GRANT CONNECT, RESOURCE TO BANK;
GRANT UNLIMITED TABLESPACE TO BANK;
GRANT CREATE TABLE TO BANK;
GRANT CREATE SEQUENCE TO BANK;
```

#### Step 5: Create the table under BANK schema
```sql
ALTER SESSION SET CURRENT_SCHEMA = BANK;

CREATE TABLE TRANSACTIONS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ACCOUNT_ID NUMBER,
    AMOUNT NUMBER(15,2),
    TRANSACTION_TYPE VARCHAR2(20),
    TRANSACTION_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DESCRIPTION VARCHAR2(200)
);
```

#### Step 6: Enable Supplemental Logging
```sql
ALTER SESSION SET CONTAINER = CDB$ROOT;  -- CDB

ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;
ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (PRIMARY KEY) COLUMNS;
ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;

ALTER SESSION SET CONTAINER = XEPDB1;

ALTER TABLE BANK.TRANSACTIONS ADD SUPPLEMENTAL LOG DATA (PRIMARY KEY) COLUMNS;
ALTER TABLE BANK.TRANSACTIONS ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;
```

#### Step 7: Grant LogMiner/CDC privileges to C##DEBEZIUM
```sql
GRANT LOGMINING TO C##DEBEZIUM CONTAINER=ALL;

GRANT EXECUTE ON DBMS_LOGMNR TO C##DEBEZIUM CONTAINER=ALL;
GRANT SELECT ON V_$LOGMNR_CONTENTS TO C##DEBEZIUM CONTAINER=ALL;
GRANT SELECT ON V_$LOG TO C##DEBEZIUM CONTAINER=ALL;
GRANT SELECT ON V_$LOGFILE TO C##DEBEZIUM CONTAINER=ALL;
GRANT SELECT ON V_$ARCHIVED_LOG TO C##DEBEZIUM CONTAINER=ALL;
GRANT SELECT ON V_$DATABASE TO C##DEBEZIUM CONTAINER=ALL;

GRANT SELECT ANY TRANSACTION TO C##DEBEZIUM CONTAINER=ALL;
GRANT SELECT_CATALOG_ROLE TO C##DEBEZIUM CONTAINER=ALL;
GRANT EXECUTE_CATALOG_ROLE TO C##DEBEZIUM CONTAINER=ALL;

-- Table access in PDB
GRANT SELECT ON BANK.TRANSACTIONS TO C##DEBEZIUM;
```

#### Step 8: Fix Authentication Protocol (for JDBC compatibility)
Edit `sqlnet.ora` (create if missing):
Path: `C:\Users\IT\Softwares\Oracle21C\homes\OraDB21Home1\network\admin\sqlnet.ora`

Add:
```
SQLNET.ALLOWED_LOGON_VERSION_SERVER=11
SQLNET.ALLOWED_LOGON_VERSION_CLIENT=11
```

Restart listener:
```powershell
lsnrctl stop
lsnrctl start
```

Reset password:
```sql
ALTER USER C##DEBEZIUM IDENTIFIED BY dbz CONTAINER=ALL;
```

#### Step 9: Test C##DEBEZIUM login
```powershell
sqlplus c##debezium/dbz@//localhost:1521/XEPDB1
```
â†’ Should connect.

#### Step 10: Final Connector JSON & Deploy
```json
{
  "name": "oracle-cdc-bank-connector",
  "config": {
    "connector.class": "io.debezium.connector.oracle.OracleConnector",
    "tasks.max": "1",
    "database.hostname": "host.docker.internal",
    "database.port": "1521",
    "database.user": "C##DEBEZIUM",
    "database.password": "dbz",
    "database.dbname": "XE",
    "database.pdb.name": "XEPDB1",
    "database.server.name": "oracle_bank",
    "topic.prefix": "cdc.bank",
    "table.include.list": "BANK.TRANSACTIONS",
    "snapshot.mode": "initial",
    "snapshot.locking.mode": "shared",
    "database.history.kafka.bootstrap.servers": "kafka:29092",
    "database.history.kafka.topic": "schema-history.bank",
    "database.connection.adapter": "logminer",
    "log.mining.strategy": "online_catalog",
    "decimal.handling.mode": "string",
    "time.precision.mode": "adaptive",
    "tombstones.on.delete": "true",
    "database.oracle.version": "21"
  }
}
```

Deploy with in-memory PowerShell (as before).

Now it will work perfectly with the common user â€” this is what was missing in the previous steps.

Your CDC pipeline is complete! ðŸš€

Insert data in `BANK.TRANSACTIONS` and watch Kafka topics fill up. Let me know when you see the events! ðŸŽ‰


step 8, step 9, step 10 not required but step 10, pls copy the connector from your github repository





Delete the connector command:

PS C:\Users\IT\LomaWorkspace\Python\kafka real time streaming> Invoke-RestMethod -Method Delete -Uri "http://localhost:8083/connectors/oracle-cdc-bank-connector"


Registering the connector command:

PS C:\Users\IT\LomaWorkspace\Python\kafka real time streaming> Invoke-RestMethod -Method Post -Uri "http://localhost:8083/connectors" -ContentType "application/json" -InFile oracle-cdc.json

name                      config
----                      ------
oracle-cdc-bank-connector @{connector.class=io.debezium.connector.oracle.OracleConnector; tasks.max=1; database.hostname=host.docker.internal; database.port=... 


//sample script for insertions (you need to execute this in XEPDB1)

ALTER SESSION SET CONTAINER = XEPDB1;

begin

for g in 101..110 loop
  INSERT INTO BANK.TRANSACTIONS (ACCOUNT_ID, AMOUNT, TRANSACTION_TYPE, DESCRIPTION)
  VALUES (100 || g, -150.00, 'WITHDRAWAL', 'ATM withdrawal');
  COMMIT;
end loop;  